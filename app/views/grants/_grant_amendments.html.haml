:ruby
  table_dom_id = SecureRandom.hex

- if can? :create, Grant
  = link_to new_grant_grant_amendment_path(@grant), :class => "btn btn-primary btn-lg" do
    %i.fa.fa-plus
    New Amendment

.table-responsive
  %table.table.table-hover{:id => table_dom_id,
          :data => {:toggle => 'table',
          :card_view => "false",
          :pagination => 'true',
          :sort_order => 'asc',
          :sortable => 'true',
          :side_pagination => 'server',
          :show_pagination_switch => 'true',
          :page_number => '1',
          :page_list => "[5, 10, 20, 50, 100, 200]",
          :page_size => current_user.num_table_rows,
          :search => 'false',
          :show_columns => 'true',
          :toolbar => "#table_actions",
          :row_style => 'row_style',
          :click_to_select => 'true',
          :show_export => 'true',
          :id_field => 'object_key',
          :export_types => "['csv', 'txt', 'excel']",
          :state_save => 'true',
          :state_save_id_table => "grant_amendments_id",
          :state_save_expire => "1y",
          :maintain_selected => 'true',
          :single_select => 'false'}}
    %thead
      %tr
        %th.center{:data => {:sortable => 'true'}} Amendment Number
        %th.center{:data => {:sortable => 'true'}} Grant Number
        %th.center{:data => {:sortable => 'true'}} Comments
        %th.center{:data => {:sortable => 'true'}} Created By
        %th.center{:data => {:sortable => 'true'}} Created Date & Time
        %th.center{:data => {:sortable => 'false'}} Actions

    %tbody
      - @grant.grant_amendments.each do |amendment|
        %tr
          %td.left= amendment.amendment_num
          %td.left= amendment.grant_num
          %td.left= amendment.comments
          %td.left= amendment.creator
          %td.left= format_as_date_time(amendment.created_at)
          %td.left
            - if can? :update, @grant
              = link_to edit_grant_grant_amendment_path(@grant, amendment), :class => "button btn-xs", :title => "Edit amendment" do
                %i.fa.fa-edit.fa-1-5x.text-success
              - if (can? :destroy, @grant)
                = link_to grant_grant_amendment_path(@grant, amendment), :method => :delete, :data => {:confirm => "Are you sure? The action cannot be undone."}  do
                  %i.fa.fa-trash-o.fa-fw.text-danger