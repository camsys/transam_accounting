<script type="text/javascript">
  $(document).ready(function() {

    $('#grant-selector').hide();

    $('#expenditure_general_ledger_account_id').change(function(){
      var selection = $(this).find(":selected").text()
      console.log( selection );

      if (selection.length > 0){
        $('#grant-selector').fadeIn();
        $('#grant-selector').find('optgroup').each(function(index, group){
            var label = $(group).attr('label')
            if (label !== selection){
              $(group).children('option').prop('selected', false);
              $(group).hide();
            } else {
              $(group).fadeIn();
            };
          }); // each of each
      } else{
        $('#grant-selector').fadeOut();
      }

    });
  });
</script>
