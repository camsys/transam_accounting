%ul.nav.nav-tabs
  - if @ledger_account.grant_budgets.count > 0 || @ledger_account.grant_specific?
    %li
      %a{:href => "#grants_table", :data =>{:toggle => 'tab'}}
        %span.badge.pull-right= @ledger_account.grant_budgets.count > 0 ? @ledger_account.grant_budgets.count : 1
        = "Grants"
  %li
    %a{:href => "#assets", :data =>{:toggle => 'tab'}}
      %span.badge.pull-right= @ledger_account.assets.count
      = "Assets"
  %li
    %a{:href => "#expenditures", :data =>{:toggle => 'tab'}}
      %span.badge.pull-right= @ledger_account.expenditures.count
      = "CapEx"

.tab-content
  - if @ledger_account.grant_budgets.count > 0 || @ledger_account.grant_specific?
    .tab-pane.fade#grants_table
      .tab-content
        - if @ledger_account.grant_budgets.count > 0
          = render :partial => 'gla_budgets', :locals => {:gla_budgets => @ledger_account.grant_budgets}
        - elsif @ledger_account.grant_specific?
          = format_field('Grant', link_to(@ledger_account.grant, grant_path(@ledger_account.grant)))
  .tab-pane.fade#assets
    .tab-content
      - if @ledger_account.assets.empty?
        %p There are no assets associated with this general ledger account.
      - else
        = render :partial => 'assets/asset_compact_datatable', :locals => {:assets => @ledger_account.assets}

  .tab-pane.fade#expenditures
    .tab-content
      - if @ledger_account.expenditures.empty?
        %p There are no CapEx associated with this general ledger account.
      - else
        = render :partial => 'expenditures/index_table', :locals => {:expenditures => @ledger_account.expenditures}

      - if can? :create, Expenditure
        .row{:style => 'margin-top:50px;'}
          .col-md-12
            %fieldset
              %legend Add CapEx
              - @expenditure = Expenditure.new
              = render :partial => 'expenditures/form'
